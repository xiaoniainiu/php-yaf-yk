<?php/** *  Copyright (c) 2013-2014  *  This is no free page *  sms.php  2014-8-11 下午10:24:28  UTF-8 *  @author yky@yky.pw */namespace common;class sms{		const S_REG = 1;	const S_UPT_PAS = 2;	const S_RESE_TPAS = 3;		public static function send($msg, $msisdn){		$content = ['msg' => $msg.'【鲜蜂网】', 'msisdn' => $msisdn];		return mgqueue::insert(mgqueue::Q_SMS, $content, g('uid'));	}		public static function check($msisdn, $code, $type){				$row = t('msisdn_code')->one_by_msisdn_code($msisdn, $code);				if (!empty($row) && $row['type'] == $type && $row['usednum'] == 0 && $row['attime'] > TIMESTAMP){			return $row['id'];		}else{			return false;		}	}		public static function used($id){		return t('msisdn_code')->update(['usednum' => 1], $id);	}	}